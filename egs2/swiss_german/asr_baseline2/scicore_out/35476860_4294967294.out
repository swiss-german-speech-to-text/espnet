2022-03-03T22:38:05 (asr.sh:249:main) ./asr.sh --stage 0 --stop_stage 1000 --ngpu 4 --use_lm false --lang de --lm_config conf/train_lm.yaml --token_type bpe --nbpe 5000 --feats_type raw --max_wav_duration 12 --speed_perturb_factors 0.9 1.0 1.1 --asr_config conf/tuning/train_asr_conformer5.yaml --inference_config conf/decode_asr.yaml --train_set train --valid_set dev --test_sets spc/test spc/valid clickworker/valid clickworker/test dialektsammlung/valid dialektsammlung/test snf/test stadt_bern_stadtrat_alligned/valid --bpe_train_text data/lm/train/text --bpe_input_sentence_size 10000000 --lm_train_text data/lm/train/text --lm_dev_text data/lm/valid/text
2022-03-03T22:38:06 (asr.sh:440:main) Stage 1: Data preparation for data/train, data/dev, etc.
2022-03-03T22:38:06 (data.sh:28:main) data preparation started
2022-03-03T22:38:06 (data.sh:37:main) stage2: Preparing data
2022-03-03T22:38:06 (data.sh:41:main) Preprocessing already done, skipping spc
2022-03-03T22:38:06 (data.sh:51:main) Preprocessing already done, skipping kanton_ar_kantonsrat_alligned
2022-03-03T22:38:06 (data.sh:60:main) Preprocessing already done, skipping kanton_ow_kantonsrat_alligned
2022-03-03T22:38:06 (data.sh:69:main) Preprocessing already done, skipping stadt_bern_stadtrat_alligned
2022-03-03T22:38:06 (data.sh:81:main) Preprocessing already done, skipping clickworker
2022-03-03T22:38:06 (data.sh:90:main) Preprocessing already done, skipping dialektsammlung
2022-03-03T22:38:06 (data.sh:100:main) Preprocessing already done, skipping snf
Assuming LM already preprocessed, exiting without any changes.
Assuming LM already preprocessed, exiting without any changes.
2022-03-03T22:38:16 (data.sh:112:main) Successfully finished. [elapsed=10s]
2022-03-03T22:38:16 (asr.sh:447:main) Stage 2: Speed perturbation: data/train -> data/train_sp
text
utt2lang
scripts/utils/perturb_data_dir_speed.sh: generated speed-perturbed version of data in data/train, in data/train_sp0.9
utils/validate_data_dir.sh: Successfully validated data-directory data/train_sp0.9
text
utt2lang
scripts/utils/perturb_data_dir_speed.sh: generated speed-perturbed version of data in data/train, in data/train_sp1.1
utils/validate_data_dir.sh: Successfully validated data-directory data/train_sp1.1
utils/combine_data.sh data/train_sp data/train_sp0.9 data/train data/train_sp1.1
utils/combine_data.sh: combined utt2uniq
utils/combine_data.sh [info]: not combining segments as it does not exist
utils/combine_data.sh: combined utt2spk
utils/combine_data.sh [info]: not combining utt2lang as it does not exist
utils/combine_data.sh [info]: not combining utt2dur as it does not exist
utils/combine_data.sh [info]: not combining utt2num_frames as it does not exist
utils/combine_data.sh [info]: not combining reco2dur as it does not exist
utils/combine_data.sh [info]: not combining feats.scp as it does not exist
utils/combine_data.sh: combined text
utils/combine_data.sh [info]: not combining cmvn.scp as it does not exist
utils/combine_data.sh [info]: not combining vad.scp as it does not exist
utils/combine_data.sh [info]: not combining reco2file_and_channel as it does not exist
utils/combine_data.sh: combined wav.scp
utils/combine_data.sh [info]: not combining spk2gender as it does not exist
fix_data_dir.sh: kept all 1782759 utterances.
fix_data_dir.sh: old files are kept in data/train_sp/.backup
2022-03-03T22:39:59 (asr.sh:469:main) Stage 3: Format wav.scp: data/ -> dump/raw
utils/copy_data_dir.sh: copied data from data/train_sp to dump/raw/org/train_sp
utils/validate_data_dir.sh: Successfully validated data-directory dump/raw/org/train_sp
2022-03-03T22:41:34 (format_wav_scp.sh:42:main) scripts/audio/format_wav_scp.sh --nj 32 --cmd run.pl --audio-format flac --fs 16k data/train_sp/wav.scp dump/raw/org/train_sp
2022-03-03T22:41:34 (format_wav_scp.sh:110:main) [info]: without segments
2022-03-04T01:46:42 (format_wav_scp.sh:142:main) Successfully finished. [elapsed=11108s]
utils/copy_data_dir.sh: copied data from data/dev to dump/raw/org/dev
utils/validate_data_dir.sh: Successfully validated data-directory dump/raw/org/dev
2022-03-04T01:46:43 (format_wav_scp.sh:42:main) scripts/audio/format_wav_scp.sh --nj 32 --cmd run.pl --audio-format flac --fs 16k data/dev/wav.scp dump/raw/org/dev
2022-03-04T01:46:43 (format_wav_scp.sh:110:main) [info]: without segments
2022-03-04T01:47:40 (format_wav_scp.sh:142:main) Successfully finished. [elapsed=57s]
utils/copy_data_dir.sh: copied data from data/spc/test to dump/raw/spc/test
utils/validate_data_dir.sh: Successfully validated data-directory dump/raw/spc/test
2022-03-04T01:47:41 (format_wav_scp.sh:42:main) scripts/audio/format_wav_scp.sh --nj 32 --cmd run.pl --audio-format flac --fs 16k data/spc/test/wav.scp dump/raw/spc/test
2022-03-04T01:47:41 (format_wav_scp.sh:110:main) [info]: without segments
2022-03-04T01:48:12 (format_wav_scp.sh:142:main) Successfully finished. [elapsed=31s]
utils/copy_data_dir.sh: copied data from data/spc/valid to dump/raw/spc/valid
utils/validate_data_dir.sh: Successfully validated data-directory dump/raw/spc/valid
2022-03-04T01:48:13 (format_wav_scp.sh:42:main) scripts/audio/format_wav_scp.sh --nj 32 --cmd run.pl --audio-format flac --fs 16k data/spc/valid/wav.scp dump/raw/spc/valid
2022-03-04T01:48:13 (format_wav_scp.sh:110:main) [info]: without segments
2022-03-04T01:48:32 (format_wav_scp.sh:142:main) Successfully finished. [elapsed=19s]
utils/copy_data_dir.sh: copied data from data/clickworker/valid to dump/raw/clickworker/valid
utils/validate_data_dir.sh: Successfully validated data-directory dump/raw/clickworker/valid
2022-03-04T01:48:33 (format_wav_scp.sh:42:main) scripts/audio/format_wav_scp.sh --nj 32 --cmd run.pl --audio-format flac --fs 16k data/clickworker/valid/wav.scp dump/raw/clickworker/valid
2022-03-04T01:48:33 (format_wav_scp.sh:110:main) [info]: without segments
2022-03-04T01:48:47 (format_wav_scp.sh:142:main) Successfully finished. [elapsed=14s]
utils/copy_data_dir.sh: copied data from data/clickworker/test to dump/raw/clickworker/test
utils/validate_data_dir.sh: Successfully validated data-directory dump/raw/clickworker/test
2022-03-04T01:48:48 (format_wav_scp.sh:42:main) scripts/audio/format_wav_scp.sh --nj 32 --cmd run.pl --audio-format flac --fs 16k data/clickworker/test/wav.scp dump/raw/clickworker/test
2022-03-04T01:48:48 (format_wav_scp.sh:110:main) [info]: without segments
2022-03-04T01:49:02 (format_wav_scp.sh:142:main) Successfully finished. [elapsed=14s]
utils/copy_data_dir.sh: copied data from data/dialektsammlung/valid to dump/raw/dialektsammlung/valid
utils/validate_data_dir.sh: Successfully validated data-directory dump/raw/dialektsammlung/valid
2022-03-04T01:49:02 (format_wav_scp.sh:42:main) scripts/audio/format_wav_scp.sh --nj 32 --cmd run.pl --audio-format flac --fs 16k data/dialektsammlung/valid/wav.scp dump/raw/dialektsammlung/valid
2022-03-04T01:49:03 (format_wav_scp.sh:110:main) [info]: without segments
2022-03-04T01:49:18 (format_wav_scp.sh:142:main) Successfully finished. [elapsed=16s]
utils/copy_data_dir.sh: copied data from data/dialektsammlung/test to dump/raw/dialektsammlung/test
utils/validate_data_dir.sh: Successfully validated data-directory dump/raw/dialektsammlung/test
2022-03-04T01:49:19 (format_wav_scp.sh:42:main) scripts/audio/format_wav_scp.sh --nj 32 --cmd run.pl --audio-format flac --fs 16k data/dialektsammlung/test/wav.scp dump/raw/dialektsammlung/test
2022-03-04T01:49:19 (format_wav_scp.sh:110:main) [info]: without segments
2022-03-04T01:49:36 (format_wav_scp.sh:142:main) Successfully finished. [elapsed=17s]
utils/copy_data_dir.sh: copied data from data/snf/test to dump/raw/snf/test
utils/validate_data_dir.sh: Successfully validated data-directory dump/raw/snf/test
2022-03-04T01:49:38 (format_wav_scp.sh:42:main) scripts/audio/format_wav_scp.sh --nj 32 --cmd run.pl --audio-format flac --fs 16k data/snf/test/wav.scp dump/raw/snf/test
2022-03-04T01:49:39 (format_wav_scp.sh:110:main) [info]: without segments
2022-03-04T01:50:57 (format_wav_scp.sh:142:main) Successfully finished. [elapsed=79s]
utils/copy_data_dir.sh: copied data from data/stadt_bern_stadtrat_alligned/valid to dump/raw/stadt_bern_stadtrat_alligned/valid
utils/validate_data_dir.sh: Successfully validated data-directory dump/raw/stadt_bern_stadtrat_alligned/valid
2022-03-04T01:50:58 (format_wav_scp.sh:42:main) scripts/audio/format_wav_scp.sh --nj 32 --cmd run.pl --audio-format flac --fs 16k data/stadt_bern_stadtrat_alligned/valid/wav.scp dump/raw/stadt_bern_stadtrat_alligned/valid
2022-03-04T01:50:58 (format_wav_scp.sh:110:main) [info]: without segments
2022-03-04T01:51:16 (format_wav_scp.sh:142:main) Successfully finished. [elapsed=18s]
2022-03-04T01:51:16 (asr.sh:571:main) Stage 4: Remove long/short data: dump/raw/org -> dump/raw
utils/copy_data_dir.sh: copied data from dump/raw/org/train_sp to dump/raw/train_sp
utils/validate_data_dir.sh: Successfully validated data-directory dump/raw/train_sp
fix_data_dir.sh: kept 1435753 utterances out of 1782759
fix_data_dir.sh: old files are kept in dump/raw/train_sp/.backup
utils/copy_data_dir.sh: copied data from dump/raw/org/dev to dump/raw/dev
utils/validate_data_dir.sh: Successfully validated data-directory dump/raw/dev
fix_data_dir.sh: kept 11574 utterances out of 12601
fix_data_dir.sh: old files are kept in dump/raw/dev/.backup
2022-03-04T01:54:45 (asr.sh:636:main) Stage 5: Generate token_list from data/lm/train/text using BPE
2022-03-04T02:10:16 (asr.sh:889:main) Stage 6-8: Skip lm-related stages: use_lm=false
2022-03-04T02:10:16 (asr.sh:902:main) Stage 9: Skip ngram stages: use_ngram=false
2022-03-04T02:10:16 (asr.sh:910:main) Stage 10: ASR collect stats: train_set=dump/raw/train_sp, valid_set=dump/raw/dev
2022-03-04T02:10:17 (asr.sh:960:main) Generate 'exp/asr_stats_raw_de_bpe5000_sp/run.sh'. You can resume the process from stage 10 using this script
2022-03-04T02:10:17 (asr.sh:964:main) ASR collect-stats started... log: 'exp/asr_stats_raw_de_bpe5000_sp/logdir/stats.*.log'
2022-03-04T02:46:48 (asr.sh:1011:main) Stage 11: ASR Training: train_set=dump/raw/train_sp, valid_set=dump/raw/dev
2022-03-04T02:46:48 (asr.sh:1078:main) Generate 'exp/asr_train_asr_conformer5_raw_de_bpe5000_sp/run.sh'. You can resume the process from stage 11 using this script
2022-03-04T02:46:48 (asr.sh:1082:main) ASR training started... log: 'exp/asr_train_asr_conformer5_raw_de_bpe5000_sp/train.log'
